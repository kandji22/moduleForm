<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <title>Document</title>
  </head>
  <body>
    <form class="offset-4 mt-4" id="formulaire">
      <input type="hidden" value="submission" name="submission" id="after" />
    </form>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>

    <script>
      var mode = "affiche";
      var data = new FormData();
      data.append("affiche", mode);
      //fetch method post
      fetch("http://localhost:8888/Controleur/ajax.php", {
        method: "POST",
        body: data,
      })
        .then((res) => {
          return res.json();
        })
        .then((data) => {
          var inputNameform =
            '<input type="hidden" name="nomForm" value="' +
            data["data"][0][1] +
            '"/>';
          //exemple de id user
          var idUser = 5;
          var inputUser =
            '<input type="hidden" name="idUser" value="' + idUser + '"/>';
          var html = String(data["data"][0][0]);
          $("#formulaire").append(inputNameform);
          $("#formulaire").append(inputUser);
          $("#formulaire").append(html);
        });

      //submission formulaire
      $("#formulaire").on("submit", function (e) {
        e.preventDefault();
        var data = new FormData(document.getElementById("formulaire"));
        fetch("http://localhost:8888/Controleur/ajax.php", {
          method: "POST",
          body: data,
        })
          .then((res) => {
            return res.json();
          })
          .then((data) => {
            $("#formulaire").empty();
            //ici faut afficher un message
            console.log(data);
          });
      });
    </script>
    <style>
      #formulaire {
        border: 1px solid black;
        display: flex;
        flex-direction: row;
      }
    </style>
  </body>
</html>
